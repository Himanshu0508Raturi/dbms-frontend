import{r,j as e,V as we,R as Se,A as ke,C as Ae,X as gs,T as Ce,D as Te,P as js,a as Re,b as ys,u as z,S as Ns,c as Ee,d as bs,e as Le,f as vs,g as De,I as $e,h as Pe,i as Be,k as Ie,l as Oe,m as ws,L as ze,n as Ue,p as Ss,q as ks,B as fe,M as As,s as Cs,U as Fe,t as Ts,w as _e,x as Rs,y as Es,z as Ls,E as ie,F as Me,G as Ve,H as Qe,J as He,K as Ds,N as Je,O as $s,Q as Ps,W as Bs,Y as Is,Z as Os,_ as We,$ as zs,a0 as qe,a1 as Ye,a2 as Ge,a3 as Ke,a4 as Xe,a5 as Us,a6 as Fs,a7 as _s,a8 as Ms,a9 as Vs,aa as ce,ab as ye,ac as Qs,ad as Hs,ae as Js,af as Ws,ag as qs,ah as Ys,ai as O,aj as Gs}from"./vendor-react-C1kleGLm.js";import{D as Ks,E as Xs,F as oe,G as Zs,$ as et,H as x,I as st,N as tt,Q as at}from"./vendor-DvKXBD6F.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const j of d.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&c(j)}).observe(document,{childList:!0,subtree:!0});function a(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function c(o){if(o.ep)return;o.ep=!0;const d=a(o);fetch(o.href,d)}})();const rt=1,nt=1e6;let de=0;function it(){return de=(de+1)%Number.MAX_SAFE_INTEGER,de.toString()}const ue=new Map,Ne=s=>{if(ue.has(s))return;const t=setTimeout(()=>{ue.delete(s),se({type:"REMOVE_TOAST",toastId:s})},nt);ue.set(s,t)},ot=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,rt)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?Ne(a):s.toasts.forEach(c=>{Ne(c.id)}),{...s,toasts:s.toasts.map(c=>c.id===a||a===void 0?{...c,open:!1}:c)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==t.toastId)}}},re=[];let ne={toasts:[]};function se(s){ne=ot(ne,s),re.forEach(t=>{t(ne)})}function lt({...s}){const t=it(),a=o=>se({type:"UPDATE_TOAST",toast:{...o,id:t}}),c=()=>se({type:"DISMISS_TOAST",toastId:t});return se({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:o=>{o||c()}}}),{id:t,dismiss:c,update:a}}function ct(){const[s,t]=r.useState(ne);return r.useEffect(()=>(re.push(t),()=>{const a=re.indexOf(t);a>-1&&re.splice(a,1)}),[s]),{...s,toast:lt,dismiss:a=>se({type:"DISMISS_TOAST",toastId:a})}}function h(...s){return Ks(Xs(s))}const dt=js,Ze=r.forwardRef(({className:s,...t},a)=>e.jsx(we,{ref:a,className:h("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));Ze.displayName=we.displayName;const ut=oe("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),es=r.forwardRef(({className:s,variant:t,...a},c)=>e.jsx(Se,{ref:c,className:h(ut({variant:t}),s),...a}));es.displayName=Se.displayName;const mt=r.forwardRef(({className:s,...t},a)=>e.jsx(ke,{ref:a,className:h("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",s),...t}));mt.displayName=ke.displayName;const ss=r.forwardRef(({className:s,...t},a)=>e.jsx(Ae,{ref:a,className:h("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(gs,{className:"h-4 w-4"})}));ss.displayName=Ae.displayName;const ts=r.forwardRef(({className:s,...t},a)=>e.jsx(Ce,{ref:a,className:h("text-sm font-semibold",s),...t}));ts.displayName=Ce.displayName;const as=r.forwardRef(({className:s,...t},a)=>e.jsx(Te,{ref:a,className:h("text-sm opacity-90",s),...t}));as.displayName=Te.displayName;function xt(){const{toasts:s}=ct();return e.jsxs(dt,{children:[s.map(function({id:t,title:a,description:c,action:o,...d}){return e.jsxs(es,{...d,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(ts,{children:a}),c&&e.jsx(as,{children:c})]}),o,e.jsx(ss,{})]},t)}),e.jsx(Ze,{})]})}const ht=({...s})=>{const{theme:t="system"}=Zs();return e.jsx(et,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})},pt=ys,ft=r.forwardRef(({className:s,sideOffset:t=4,...a},c)=>e.jsx(Re,{ref:c,sideOffset:t,className:h("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));ft.displayName=Re.displayName;const rs=r.createContext(void 0),be="/api",gt=({children:s})=>{const[t,a]=r.useState(null),[c,o]=r.useState(null),d=z();r.useEffect(()=>{const m=localStorage.getItem("token"),k=localStorage.getItem("user");m&&k&&(o(m),a(JSON.parse(k)),console.log(a))},[]);const j=async(m,k,S,E)=>{const w=await fetch(`${be}/public/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,password:k,email:S,roles:E})});if(!w.ok){const D=await w.text();throw new Error(D||"Signup failed")}},u=async(m,k)=>{const S=await fetch(`${be}/public/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,password:k})});if(!S.ok)throw new Error("Login failed");const E=await S.json(),w=E.token,D=E.roles||[];console.log("Login response:",E),console.log("Extracted token:",w),console.log("Extracted roles:",D);let i={};try{i=JSON.parse(atob(w.split(".")[1])),console.log("JWT payload:",i)}catch(l){console.warn("Failed to decode JWT payload:",l)}const N={username:i.sub||m,email:i.email||"",roles:D};o(w),a(N),localStorage.setItem("token",w),localStorage.setItem("user",JSON.stringify(N))},p=()=>{o(null),a(null),localStorage.removeItem("token"),localStorage.removeItem("user"),d("/")};return e.jsx(rs.Provider,{value:{user:t,token:c,login:u,signup:j,logout:p,isAuthenticated:!!c},children:s})},F=()=>{const s=r.useContext(rs);if(!s)throw new Error("useAuth must be used within AuthProvider");return s},ge=oe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),b=r.forwardRef(({className:s,variant:t,size:a,asChild:c=!1,...o},d)=>{const j=c?Ns:"button";return e.jsx(j,{className:h(ge({variant:t,size:a,className:s})),ref:d,...o})});b.displayName="Button";const jt=Ss,yt=ks,Nt=r.forwardRef(({className:s,inset:t,children:a,...c},o)=>e.jsxs(Ee,{ref:o,className:h("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",s),...c,children:[a,e.jsx(bs,{className:"ml-auto h-4 w-4"})]}));Nt.displayName=Ee.displayName;const bt=r.forwardRef(({className:s,...t},a)=>e.jsx(Le,{ref:a,className:h("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));bt.displayName=Le.displayName;const ns=r.forwardRef(({className:s,sideOffset:t=4,...a},c)=>e.jsx(vs,{children:e.jsx(De,{ref:c,sideOffset:t,className:h("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));ns.displayName=De.displayName;const me=r.forwardRef(({className:s,inset:t,...a},c)=>e.jsx($e,{ref:c,className:h("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",s),...a}));me.displayName=$e.displayName;const vt=r.forwardRef(({className:s,children:t,checked:a,...c},o)=>e.jsxs(Pe,{ref:o,className:h("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),checked:a,...c,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Be,{children:e.jsx(Ie,{className:"h-4 w-4"})})}),t]}));vt.displayName=Pe.displayName;const wt=r.forwardRef(({className:s,children:t,...a},c)=>e.jsxs(Oe,{ref:c,className:h("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Be,{children:e.jsx(ws,{className:"h-2 w-2 fill-current"})})}),t]}));wt.displayName=Oe.displayName;const is=r.forwardRef(({className:s,inset:t,...a},c)=>e.jsx(ze,{ref:c,className:h("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));is.displayName=ze.displayName;const xe=r.forwardRef(({className:s,...t},a)=>e.jsx(Ue,{ref:a,className:h("-mx-1 my-1 h-px bg-muted",s),...t}));xe.displayName=Ue.displayName;const St=()=>{const{user:s,logout:t,isAuthenticated:a}=F(),c=z(),[o,d]=r.useState("light");r.useEffect(()=>{const p=localStorage.getItem("theme")||"light";d(p),document.documentElement.classList.toggle("dark",p==="dark")},[]);const j=()=>{const u=o==="light"?"dark":"light";d(u),localStorage.setItem("theme",u),document.documentElement.classList.toggle("dark",u==="dark")};return e.jsx("nav",{className:"border-b bg-card/50 backdrop-blur-sm sticky top-0 z-50",children:e.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>c("/"),children:[e.jsx(fe,{className:"h-6 w-6 text-primary"}),e.jsx("span",{className:"text-xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"iLibrary"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:j,className:"rounded-full",children:o==="light"?e.jsx(As,{className:"h-5 w-5"}):e.jsx(Cs,{className:"h-5 w-5"})}),a&&s?e.jsxs(jt,{children:[e.jsx(yt,{asChild:!0,children:e.jsxs(b,{variant:"ghost",className:"gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center",children:s.username.charAt(0).toUpperCase()}),e.jsx("span",{className:"hidden sm:inline",children:s.username})]})}),e.jsxs(ns,{align:"end",className:"w-56",children:[e.jsx(is,{children:"My Account"}),e.jsx(xe,{}),e.jsxs(me,{onClick:()=>c("/profile"),children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Profile"]}),e.jsx(xe,{}),e.jsxs(me,{onClick:t,className:"text-destructive",children:[e.jsx(Ts,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]}):e.jsx(b,{onClick:()=>c("/auth"),children:"Login / Sign Up"})]})]})})},v=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:h("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));v.displayName="Card";const T=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:h("flex flex-col space-y-1.5 p-6",s),...t}));T.displayName="CardHeader";const R=r.forwardRef(({className:s,...t},a)=>e.jsx("h3",{ref:a,className:h("text-2xl font-semibold leading-none tracking-tight",s),...t}));R.displayName="CardTitle";const W=r.forwardRef(({className:s,...t},a)=>e.jsx("p",{ref:a,className:h("text-sm text-muted-foreground",s),...t}));W.displayName="CardDescription";const $=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:h("p-6 pt-0",s),...t}));$.displayName="CardContent";const kt=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:h("flex items-center p-6 pt-0",s),...t}));kt.displayName="CardFooter";const ve=()=>{const s=z(),{isAuthenticated:t}=F(),a=o=>{s(t?o:"/auth")},c=[{icon:fe,title:"Smart Seat Management",description:"Choose from 60 premium study seats across Ground, First, and Special floors"},{icon:_e,title:"Flexible Subscriptions",description:"Weekly, monthly, or yearly plans tailored to your study schedule"},{icon:Rs,title:"Real-time Availability",description:"Check seat availability instantly and book your preferred spot"},{icon:Es,title:"Secure Authentication",description:"Role-based access for students, librarians, and administrators"},{icon:Ls,title:"QR Code Verification",description:"Quick and contactless entry with QR code scanning"},{icon:ie,title:"Easy Payments",description:"Secure online payment integration with Stripe"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("section",{className:"relative py-20 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-primary opacity-10"}),e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-6",children:[e.jsxs("h1",{className:"text-5xl md:text-6xl font-bold tracking-tight",children:["Welcome to ",e.jsx("span",{className:"bg-gradient-primary bg-clip-text text-transparent",children:"iLibrary"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Your comprehensive private library management system. Book seats, manage subscriptions, and enjoy a seamless study experience."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center pt-4",children:[e.jsx(b,{size:"lg",className:"text-lg shadow-glow",onClick:()=>a("/seat-booking"),children:"Book a Seat"}),e.jsx(b,{size:"lg",variant:"outline",className:"text-lg",onClick:()=>a("/subscriptions"),children:"Get Subscription"})]})]})})]}),e.jsx("section",{className:"py-20 bg-secondary/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Why Choose iLibrary?"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Modern technology meets traditional learning spaces"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:c.map((o,d)=>e.jsx(v,{className:"hover:shadow-lg transition-shadow",children:e.jsxs($,{className:"pt-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center mb-4",children:e.jsx(o.icon,{className:"h-6 w-6 text-primary"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:o.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.description})]})},d))})]})}),e.jsx("section",{className:"py-20",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsx(v,{className:"border-2",children:e.jsxs($,{className:"pt-6 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"About iLibrary"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"iLibrary is a comprehensive private library management system designed to streamline the experience for students, librarians, and administrators. Our platform offers flexible seat booking with hourly rates, subscription plans ranging from weekly to yearly options, and secure role-based authentication."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"With features like real-time seat availability checking, QR code verification for quick entry, and integrated payment processing through Stripe, we make library management effortless and efficient. Whether you're a student looking for a quiet study space, a librarian managing daily operations, or an administrator overseeing the entire system, iLibrary has the tools you need."}),e.jsxs("div",{className:"pt-4 grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:"60"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Study Seats"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:"3"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Subscription Plans"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:"₹50"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Per Hour"})]})]})]})})})})}),e.jsx("section",{className:"py-20 bg-gradient-primary text-primary-foreground",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Start Your Learning Journey?"}),e.jsx("p",{className:"text-lg opacity-90 mb-8 max-w-2xl mx-auto",children:"Join iLibrary today and experience the future of library management"}),e.jsx(b,{size:"lg",variant:"secondary",className:"text-lg",onClick:()=>s("/auth"),children:"Get Started Now"})]})})]})},H=r.forwardRef(({className:s,type:t,...a},c)=>e.jsx("input",{type:t,className:h("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:c,...a}));H.displayName="Input";const At=oe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),J=r.forwardRef(({className:s,...t},a)=>e.jsx(Me,{ref:a,className:h(At(),s),...t}));J.displayName=Me.displayName;const Ct=Ds,os=r.forwardRef(({className:s,...t},a)=>e.jsx(Ve,{ref:a,className:h("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));os.displayName=Ve.displayName;const he=r.forwardRef(({className:s,...t},a)=>e.jsx(Qe,{ref:a,className:h("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s),...t}));he.displayName=Qe.displayName;const pe=r.forwardRef(({className:s,...t},a)=>e.jsx(He,{ref:a,className:h("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));pe.displayName=He.displayName;const Tt=()=>{const s=z(),{login:t,signup:a,isAuthenticated:c,user:o}=F(),[d,j]=r.useState(""),[u,p]=r.useState(""),[m,k]=r.useState(!1),[S,E]=r.useState(""),[w,D]=r.useState(""),[i,N]=r.useState(""),[l,f]=r.useState(!1);r.useEffect(()=>{if(c&&o){if(console.log("Current user:",o),console.log("Current user roles:",o.roles),!Array.isArray(o.roles)||o.roles.length===0){x.error("No roles assigned to user");return}const y=o.roles.map(n=>n.toUpperCase());console.log("User roles (uppercase):",y),y.includes("ROLE_ADMIN")?(console.log("Redirecting admin user"),s("/admin")):y.includes("ROLE_LIBRARIAN")?(console.log("Redirecting librarian user"),s("/librarian")):y.includes("ROLE_STUDENT")?(console.log("Redirecting student user"),s("/home")):(console.log("Unknown role found:",y),x.error("Invalid role configuration"))}},[c,o,s]);const P=async y=>{y.preventDefault(),k(!0);try{await t(d,u);const n=JSON.parse(localStorage.getItem("user")||"{}");if(console.log("User data after login:",n),!n.roles||n.roles.length===0){x.error("No roles assigned to user");return}const g=n.roles.map(L=>L.toUpperCase());console.log("User roles:",g),g.includes("ROLE_ADMIN")?(x.success("Welcome, Admin!"),s("/admin")):g.includes("ROLE_LIBRARIAN")?(x.success("Welcome, Librarian!"),s("/librarian")):g.includes("ROLE_STUDENT")||g.includes("ROLE_USER")?(x.success("Welcome!"),s("/home")):(x.error("Invalid role configuration"),console.error("Unknown roles:",g))}catch(n){x.error(n instanceof Error?n.message:"Login failed"),console.error("Login error:",n)}finally{k(!1)}},B=async y=>{y.preventDefault(),f(!0);try{await a(S,w,i,["ROLE_STUDENT"]),x.success("Registration successful! Please login.");const n=document.querySelector('[value="login"]');n==null||n.click()}catch(n){x.error(n instanceof Error?n.message:"Signup failed")}finally{f(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-secondary/20 to-background flex items-center justify-center p-4",children:e.jsxs(v,{className:"w-full max-w-md shadow-glow",children:[e.jsxs(T,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-primary flex items-center justify-center",children:e.jsx(fe,{className:"h-8 w-8 text-primary-foreground"})})}),e.jsx(R,{className:"text-2xl",children:"Welcome to iLibrary"}),e.jsx(W,{children:"Login or create an account to continue"})]}),e.jsx($,{children:e.jsxs(Ct,{defaultValue:"login",className:"w-full",children:[e.jsxs(os,{className:"grid w-full grid-cols-2",children:[e.jsx(he,{value:"login",children:"Login"}),e.jsx(he,{value:"signup",children:"Sign Up"})]}),e.jsx(pe,{value:"login",children:e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"login-username",children:"Username"}),e.jsx(H,{id:"login-username",type:"text",placeholder:"Enter your username",value:d,onChange:y=>j(y.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"login-password",children:"Password"}),e.jsx(H,{id:"login-password",type:"password",placeholder:"Enter your password",value:u,onChange:y=>p(y.target.value),required:!0})]}),e.jsx(b,{type:"submit",className:"w-full",disabled:m,children:m?"Logging in...":"Login"})]})}),e.jsx(pe,{value:"signup",children:e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"signup-username",children:"Username"}),e.jsx(H,{id:"signup-username",type:"text",placeholder:"Choose a username",value:S,onChange:y=>E(y.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"signup-email",children:"Email"}),e.jsx(H,{id:"signup-email",type:"email",placeholder:"Enter your email",value:i,onChange:y=>N(y.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"signup-password",children:"Password"}),e.jsx(H,{id:"signup-password",type:"password",placeholder:"Create a password",value:w,onChange:y=>D(y.target.value),required:!0})]}),e.jsx(b,{type:"submit",className:"w-full",disabled:l,children:l?"Creating account...":"Sign Up"})]})})]})})]})})},K="/api",Rt=()=>{const{token:s,isAuthenticated:t}=F(),a=z(),[c,o]=r.useState([]),[d,j]=r.useState(null),[u,p]=r.useState(1),[m,k]=r.useState(!1);r.useEffect(()=>{t||a("/auth")},[t,a]);const S=[...Array.from({length:20},(l,f)=>`G-${f+1}`),...Array.from({length:20},(l,f)=>`F-${f+21}`),...Array.from({length:20},(l,f)=>`S-${f+41}`)],E=async()=>{try{const l=await fetch(`${K}/seat/available`,{headers:{Authorization:`Bearer ${s}`}});if(!l.ok)throw new Error("Failed to fetch available seats");const f=await l.json();o(f)}catch(l){x.error("Failed to fetch available seats"),console.error(l)}},w=async()=>{if(!d){x.error("Please select a seat");return}k(!0);try{const l=await fetch(`${K}/booking/seat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({seatNumber:d,hours:u})});if(!l.ok){const I=await l.text().catch(()=>"");throw new Error(`Booking failed (${l.status}) ${I}`)}x.success("Seat booked successfully! Redirecting to payment...");let f=null;try{f=await l.clone().json().catch(()=>null)}catch{f=null}const P=l.headers.get("location")||l.headers.get("x-session-url")||l.headers.get("x-checkout-url"),B=l.headers.get("x-booking-id")||l.headers.get("x-payment-id"),y=(f==null?void 0:f.sessionUrl)||(f==null?void 0:f.url)||(f==null?void 0:f.checkoutUrl);if(y){window.location.href=y;return}if(P&&/^https?:\/\//.test(P)){window.location.href=P;return}const n=(f==null?void 0:f.bookingId)||(f==null?void 0:f.paymentId)||B,g=async(I=1)=>{if(n){const _=await fetch(`${K}/payment/seat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({bookingId:n})});if(!_.ok){if(_.status===409)try{const Y=await fetch(`${K}/booking/pending`,{headers:{Authorization:`Bearer ${s}`}});if(Y.ok){const G=await Y.json();if(Array.isArray(G)&&G.length>0){const je=G[0].bookingId||G[0].id||G[0].bookingIdString||G[0].paymentId;if(je){x("Reusing existing pending booking for payment",{type:"info"});const te=await fetch(`${K}/payment/seat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({bookingId:je})});if(te.ok)return te.json();const fs=await te.text().catch(()=>"");throw new Error(`Payment init (reused) failed (${te.status}) ${fs}`)}}}}catch(Y){console.error("Failed to fetch pending bookings",Y)}if(I<3&&_.status>=500)return await new Promise(Y=>setTimeout(Y,500*I)),g(I+1);const le=await _.text().catch(()=>"");throw new Error(`Payment init failed (${_.status}) ${le}`)}return _.json()}const q=await fetch(`${K}/payment/seat`,{headers:{Authorization:`Bearer ${s}`}});if(!q.ok){if(I<3&&q.status>=500)return await new Promise(le=>setTimeout(le,500*I)),g(I+1);const _=await q.text().catch(()=>"");throw new Error(`Payment initialization failed (${q.status}) ${_}`)}return q.json()},L=await g(),Q=(L==null?void 0:L.sessionUrl)||(L==null?void 0:L.url)||(L==null?void 0:L.checkoutUrl);if(Q){window.location.href=Q;return}throw console.error("Payment init response",L),new Error("Payment initialization failed")}catch(l){x.error(l instanceof Error?l.message:"Booking failed")}finally{k(!1)}},D=l=>d===l?"selected":c.includes(l)?"available":"booked",i=l=>l==="selected"?"bg-accent text-accent-foreground":l==="available"?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-destructive/20 text-muted-foreground cursor-not-allowed",N=u*50+9*u;return e.jsx("div",{className:"min-h-screen bg-background py-8",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsxs(v,{children:[e.jsx(T,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-6 w-6"}),"Book Your Seat"]})}),e.jsxs($,{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{onClick:E,variant:"outline",children:"Check Available Seats"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-primary rounded"}),e.jsx("span",{children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-destructive/20 rounded"}),e.jsx("span",{children:"Booked"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-accent rounded"}),e.jsx("span",{children:"Selected"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Ground Floor"}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:S.slice(0,20).map(l=>e.jsx(b,{variant:"outline",size:"sm",className:i(D(l)),onClick:()=>{c.includes(l)&&j(l)},disabled:!c.includes(l)&&d!==l,children:l},l))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"First Floor"}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:S.slice(20,40).map(l=>e.jsx(b,{variant:"outline",size:"sm",className:i(D(l)),onClick:()=>{c.includes(l)&&j(l)},disabled:!c.includes(l)&&d!==l,children:l},l))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Special Floor"}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:S.slice(40,60).map(l=>e.jsx(b,{variant:"outline",size:"sm",className:i(D(l)),onClick:()=>{c.includes(l)&&j(l)},disabled:!c.includes(l)&&d!==l,children:l},l))})]})]})]}),e.jsx(v,{children:e.jsx($,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Selected Seat"}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:d||"None"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Duration (Hours)"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(b,{variant:"outline",size:"icon",onClick:()=>p(Math.max(1,u-1)),children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-2xl font-bold w-12 text-center",children:u}),e.jsx(b,{variant:"outline",size:"icon",onClick:()=>p(u+1),children:e.jsx(Ps,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Rate (₹50/hour)"}),e.jsxs("span",{children:["₹",u*50]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"GST"}),e.jsx("span",{children:"₹9"})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total Amount"}),e.jsxs("span",{className:"text-primary",children:["₹",N]})]})]}),e.jsx(b,{className:"w-full",size:"lg",onClick:w,disabled:!d||m,children:m?"Processing...":"Confirm & Pay"})]})})})]})})})},Et="/api",Lt=()=>{const{token:s,isAuthenticated:t}=F(),a=z(),[c,o]=r.useState(null);r.useEffect(()=>{t||a("/auth")},[t,a]);const d=[{type:"WEEKLY",price:600,duration:"7 days",features:["Access to all study areas","Valid for 7 consecutive days","Flexible hourly bookings","QR code entry"]},{type:"MONTHLY",price:3500,duration:"30 days",popular:!0,features:["Access to all study areas","Valid for 30 consecutive days","Flexible hourly bookings","QR code entry","Priority seat selection","Best value for regular users"]},{type:"YEARLY",price:12e3,duration:"365 days",features:["Access to all study areas","Valid for full year","Flexible hourly bookings","QR code entry","Priority seat selection","Maximum savings","Transferable (one time)"]}],j=async u=>{o(u);try{if(!t){x.error("Please login to purchase a subscription"),a("/auth");return}const p=await fetch(`${Et}/subscription/buy`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({type:u})});if(p.status===401){x.error("Unauthorized. Please login again."),a("/auth");return}if(!p.ok){const m=await p.text().catch(()=>"");throw new Error(`Subscription purchase failed (${p.status}) ${m}`)}if(p.status===202)x.success("Subscription initiated successfully"),a(`/payment?type=${u}`);else throw new Error("Unexpected response from subscription buy")}catch(p){x.error(p instanceof Error?p.message:"Failed to process subscription")}finally{o(null)}};return e.jsx("div",{className:"min-h-screen bg-background py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Choose Your Subscription Plan"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Select the plan that fits your study schedule"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:d.map(u=>e.jsxs(v,{className:`relative ${u.popular?"border-primary shadow-glow":""}`,children:[u.popular&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:e.jsxs("div",{className:"bg-gradient-accent text-accent-foreground px-4 py-1 rounded-full text-sm font-semibold flex items-center gap-1",children:[e.jsx(Bs,{className:"h-4 w-4"}),"Most Popular"]})}),e.jsxs(T,{className:"text-center",children:[e.jsx(R,{className:"text-2xl",children:u.type}),e.jsx(W,{children:u.duration}),e.jsx("div",{className:"pt-4",children:e.jsxs("div",{className:"text-4xl font-bold text-primary",children:["₹",u.price.toLocaleString()]})})]}),e.jsxs($,{className:"space-y-6",children:[e.jsx("ul",{className:"space-y-3",children:u.features.map((p,m)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Ie,{className:"h-5 w-5 text-primary shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm",children:p})]},m))}),e.jsx(b,{className:"w-full",size:"lg",variant:u.popular?"default":"outline",onClick:()=>j(u.type),disabled:c===u.type,children:c===u.type?"Processing...":"Buy Now"})]})]},u.type))}),e.jsx("div",{className:"mt-12 max-w-2xl mx-auto",children:e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(R,{children:"Subscription Benefits"})}),e.jsxs($,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("p",{children:"• All subscriptions grant unlimited access during the validity period"}),e.jsx("p",{children:"• You can still book specific seats on an hourly basis with your subscription"}),e.jsx("p",{children:"• Subscriptions can be renewed before expiry"}),e.jsx("p",{children:"• Cancel anytime with pro-rated refunds (terms apply)"}),e.jsx("p",{children:"• Instant QR code generation for easy entry"})]})]})})]})})},Dt="/api",$t=()=>{const{token:s,isAuthenticated:t}=F(),a=z(),[c]=Is(),[o,d]=r.useState(!1),j=c.get("type");r.useEffect(()=>{if(!t){a("/auth");return}if(!j){x.error("No subscription type specified"),a("/subscriptions");return}},[t,a,j]);const u=async()=>{d(!0);try{const p=await fetch(`${Dt}/payment/subscription`,{headers:{Authorization:`Bearer ${s}`}});if(p.status===401){x.error("Unauthorized. Please login again."),a("/auth");return}if(!p.ok){const S=await p.text().catch(()=>"");throw new Error(`Payment initialization failed (${p.status}) ${S}`)}const m=await p.json();console.log("Payment response:",m);const k=(m==null?void 0:m.sessionUrl)||(m==null?void 0:m.url)||(m==null?void 0:m.checkoutUrl);if(k&&/^https?:\/\//.test(k))x.success("Redirecting to payment..."),window.location.href=k;else throw console.error("Payment init response",m),new Error("Payment initialization failed: no redirect URL returned")}catch(p){x.error(p instanceof Error?p.message:"Failed to initialize payment")}finally{d(!1)}};return j?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(v,{className:"w-full max-w-md shadow-glow",children:[e.jsxs(T,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-primary flex items-center justify-center",children:e.jsx(ie,{className:"h-8 w-8 text-primary-foreground"})})}),e.jsx(R,{className:"text-2xl",children:"Complete Your Payment"}),e.jsxs(W,{children:["Subscription Type: ",e.jsx("span",{className:"font-semibold",children:j})]})]}),e.jsxs($,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-muted-foreground",children:"Your subscription has been initiated. Click below to proceed with payment."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You will be redirected to Stripe for secure payment processing."})]}),e.jsx(b,{onClick:u,disabled:o,className:"w-full",size:"lg",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Os,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Confirm & Pay"}),e.jsx("div",{className:"text-center",children:e.jsx(b,{variant:"ghost",onClick:()=>a("/subscriptions"),disabled:o,children:"Back to Subscriptions"})})]})]})}):null},Pt=Us,Bt=Fs,It=zs,ls=r.forwardRef(({className:s,...t},a)=>e.jsx(We,{className:h("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));ls.displayName=We.displayName;const cs=r.forwardRef(({className:s,...t},a)=>e.jsxs(It,{children:[e.jsx(ls,{}),e.jsx(qe,{ref:a,className:h("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));cs.displayName=qe.displayName;const ds=({className:s,...t})=>e.jsx("div",{className:h("flex flex-col space-y-2 text-center sm:text-left",s),...t});ds.displayName="AlertDialogHeader";const us=({className:s,...t})=>e.jsx("div",{className:h("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});us.displayName="AlertDialogFooter";const ms=r.forwardRef(({className:s,...t},a)=>e.jsx(Ye,{ref:a,className:h("text-lg font-semibold",s),...t}));ms.displayName=Ye.displayName;const xs=r.forwardRef(({className:s,...t},a)=>e.jsx(Ge,{ref:a,className:h("text-sm text-muted-foreground",s),...t}));xs.displayName=Ge.displayName;const hs=r.forwardRef(({className:s,...t},a)=>e.jsx(Ke,{ref:a,className:h(ge(),s),...t}));hs.displayName=Ke.displayName;const ps=r.forwardRef(({className:s,...t},a)=>e.jsx(Xe,{ref:a,className:h(ge({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));ps.displayName=Xe.displayName;const Ot=oe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function V({className:s,variant:t,...a}){return e.jsx("div",{className:h(Ot({variant:t}),s),...a})}const M="/api",zt=()=>{const{user:s,token:t,isAuthenticated:a,logout:c}=F(),o=z(),[d,j]=r.useState([]),[u,p]=r.useState(null),[m,k]=r.useState([]),[S,E]=r.useState(!1),w=n=>{try{const g=new Date(n);if(isNaN(g.getTime()))return console.warn("Invalid datetime format:",n),n;let L=g.getHours(),Q=g.getMinutes();const I=L>=12?"PM":"AM";return`${L%12||12}:${Q.toString().padStart(2,"0")} ${I}`}catch(g){return console.error("Error formatting time:",n,g),n}};r.useEffect(()=>{a||o("/auth")},[a,o]);const D=async()=>{try{const n=await fetch(`${M}/changeDetail/bookingHistory`,{headers:{Authorization:`Bearer ${t}`}});if(n.ok){const g=await n.json();j(g),console.log(g)}}catch{x.error("Failed to fetch booking history")}},i=async()=>{try{const n=await fetch(`${M}/changeDetail/activeSubscription`,{headers:{Authorization:`Bearer ${t}`}});if(n.ok){const g=await n.json();p(g)}}catch{console.log("No active subscription")}},N=async()=>{try{const n=await fetch(`${M}/changeDetail/allSubscription`,{headers:{Authorization:`Bearer ${t}`}});if(n.ok){const g=await n.json();k(g)}}catch{x.error("Failed to fetch subscriptions")}},l=async n=>{try{(await fetch(`${M}/booking/cancel?bookingId=${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&(x.success("Booking cancelled successfully"),D())}catch{x.error("Failed to cancel booking")}},f=async()=>{try{const n=await fetch(`${M}/subscription/renew`,{method:"PUT",headers:{Authorization:`Bearer ${t}`}});if(n.ok){const g=await n.text();x.success(g),i()}}catch{x.error("Failed to renew subscription")}},P=async()=>{try{const n=await fetch(`${M}/subscription/cancel`,{method:"PUT",headers:{Authorization:`Bearer ${t}`}});if(n.ok){const g=await n.text();x.success(g),i()}}catch{x.error("Failed to cancel subscription")}},B=async()=>{try{const n=await fetch(`${M}/subscription/status`,{headers:{Authorization:`Bearer ${t}`}});if(n.ok){const g=await n.text();x.info(g)}}catch{x.error("Failed to check status")}},y=async()=>{E(!0);try{(await fetch(`${M}/changeDetail/deleteUser`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&(x.success("Account deleted successfully"),c())}catch{x.error("Failed to delete account")}finally{E(!1)}};return e.jsx("div",{className:"min-h-screen bg-background py-8",children:e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(v,{children:e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-primary flex items-center justify-center text-2xl text-primary-foreground font-bold",children:s==null?void 0:s.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx(R,{className:"text-2xl",children:s==null?void 0:s.username}),e.jsx(W,{children:s==null?void 0:s.email}),e.jsx("div",{className:"flex gap-2 mt-2",children:s==null?void 0:s.roles.map(n=>e.jsx(V,{variant:"secondary",children:n.replace("ROLE_","")},n))})]})]})})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(v,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:D,children:e.jsx(T,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5"}),"Booking History"]})})}),e.jsx(v,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:i,children:e.jsx(T,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5"}),"Active Subscription"]})})}),e.jsx(v,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:N,children:e.jsx(T,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"All Subscriptions"]})})})]}),d.length>0&&e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(R,{children:"Booking History"})}),e.jsx($,{children:e.jsx("div",{className:"space-y-4",children:d.map(n=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-semibold text-lg",children:["Booking #",n.id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Seat: ",n.seat.seatNumber]})]}),e.jsxs("div",{className:"text-right space-y-1",children:[e.jsx(V,{variant:n.status==="CONFIRMED"?"default":n.status==="CANCELLED"?"destructive":"secondary",children:n.status}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Payment: ",n.isPaymentDone?"Paid":"Pending"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Date"}),e.jsx("p",{className:"font-medium",children:new Date(n.bookingDate).toLocaleDateString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Start Time"}),e.jsx("p",{className:"font-medium",children:w(n.startTime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"End Time"}),e.jsx("p",{className:"font-medium",children:w(n.endTime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Amount"}),e.jsxs("p",{className:"font-bold text-xl text-green-600",children:["₹",n.amount?n.amount.toLocaleString():"N/A"]})]})]}),n.status!=="CANCELLED"&&e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(b,{variant:"destructive",size:"sm",onClick:()=>l(n.id),children:"Cancel Booking"})})]},n.id))})})]}),u&&e.jsxs(v,{className:"border-primary",children:[e.jsx(T,{children:e.jsx(R,{children:"Active Subscription"})}),e.jsxs($,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx("p",{className:"font-medium",children:u.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(V,{children:u.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Start Date"}),e.jsx("p",{className:"font-medium",children:new Date(u.startDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"End Date"}),e.jsx("p",{className:"font-medium",children:new Date(u.endDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{onClick:f,children:"Renew"}),e.jsx(b,{variant:"outline",onClick:P,children:"Cancel"}),e.jsx(b,{variant:"secondary",onClick:B,children:"Check Status"})]})]})]}),m.length>0&&e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(R,{children:"All Subscriptions"})}),e.jsx($,{children:e.jsx("div",{className:"space-y-4",children:m.map(n=>e.jsx("div",{className:"border-b pb-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.type}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(n.startDate).toLocaleDateString()," - ",new Date(n.endDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm",children:["Amount: ₹",n.amount]})]}),e.jsx(V,{variant:n.status==="ACTIVE"?"default":"secondary",children:n.status})]})},n.id))})})]}),e.jsxs(v,{className:"border-destructive",children:[e.jsx(T,{children:e.jsx(R,{className:"text-destructive",children:"Danger Zone"})}),e.jsx($,{children:e.jsxs(Pt,{children:[e.jsx(Bt,{asChild:!0,children:e.jsxs(b,{variant:"destructive",className:"gap-2",children:[e.jsx(Ms,{className:"h-4 w-4"}),"Delete Account"]})}),e.jsxs(cs,{children:[e.jsxs(ds,{children:[e.jsx(ms,{children:"Are you absolutely sure?"}),e.jsx(xs,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]}),e.jsxs(us,{children:[e.jsx(ps,{children:"Cancel"}),e.jsx(hs,{onClick:y,disabled:S,children:S?"Deleting...":"Delete Account"})]})]})]})})]})]})})})},Ut="/api",Ft=()=>{const{user:s,token:t,isAuthenticated:a}=F(),c=z(),[o,d]=r.useState(""),[j,u]=r.useState(!1),[p,m]=r.useState(null),[k,S]=r.useState(!1),[E,w]=r.useState("scan"),D=r.useRef(null),i=r.useRef(null);r.useEffect(()=>{(!a||!(s!=null&&s.roles.includes("ROLE_LIBRARIAN")))&&c("/")},[a,s,c]),r.useEffect(()=>(i.current=new st,()=>{i.current&&i.current.reset()}),[]);const N=async()=>{var P,B;try{S(!0),w("scan");const y=await((P=i.current)==null?void 0:P.getVideoInputDevices());if(!y||y.length===0)throw new Error("No camera devices found");const n=y[0].deviceId;await((B=i.current)==null?void 0:B.decodeFromVideoDevice(n,D.current,(g,L)=>{var Q;g&&(d(g.getText()),S(!1),w("verify"),x.success("QR code scanned successfully!"),(Q=i.current)==null||Q.reset()),L&&!(L instanceof tt)&&console.error("QR Code scanning error:",L)}))}catch(y){console.error("Camera access error:",y),x.error("Failed to access camera. Please check permissions."),S(!1)}},l=()=>{i.current&&i.current.reset(),S(!1),w("verify")};r.useEffect(()=>()=>{i.current&&i.current.reset()},[]);const f=async P=>{if(P.preventDefault(),!o.trim()){x.error("Please enter a QR token");return}u(!0);try{const B=await fetch(`${Ut}/librarian/verify-qr`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({qrToken:o.trim()})});if(!B.ok)throw new Error("Verification failed");const y=await B.text();m(y),x.success("Booking verified successfully!"),d(""),setTimeout(()=>{m(null),w("scan")},3e3)}catch(B){x.error(B instanceof Error?B.message:"Failed to verify QR code"),m("Verification failed")}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen bg-background py-12",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-primary flex items-center justify-center",children:e.jsx(Vs,{className:"h-8 w-8 text-primary-foreground"})})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Librarian Dashboard"}),e.jsxs("p",{className:"text-muted-foreground",children:["Welcome, ",s==null?void 0:s.username]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs(b,{onClick:()=>w("scan"),variant:E==="scan"?"default":"outline",className:"h-16",children:[e.jsx(ce,{className:"h-5 w-5 mr-2"}),"Scan QR Code"]}),e.jsxs(b,{onClick:()=>w("verify"),variant:E==="verify"?"default":"outline",className:"h-16",children:[e.jsx(ye,{className:"h-5 w-5 mr-2"}),"Verify Token"]})]}),E==="scan"&&e.jsxs(v,{className:"shadow-glow",children:[e.jsxs(T,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Scan QR Code"]}),e.jsx(W,{children:"Use your camera to scan the student's booking QR code"})]}),e.jsxs($,{className:"space-y-4",children:[k?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("video",{ref:D,className:"w-full h-64 bg-black rounded-lg",autoPlay:!0,playsInline:!0,muted:!0}),e.jsx("div",{className:"absolute inset-0 border-2 border-primary rounded-lg pointer-events-none",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-32 h-32 border-2 border-white rounded-lg"})})]}),e.jsxs(b,{onClick:l,variant:"destructive",className:"w-full",children:[e.jsx(Qs,{className:"h-5 w-5 mr-2"}),"Stop Camera"]})]}):e.jsxs(b,{onClick:N,className:"w-full",size:"lg",children:[e.jsx(ce,{className:"h-5 w-5 mr-2"}),"Start Camera"]}),o&&e.jsxs("div",{className:"p-4 bg-primary/10 border border-primary rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"QR Code Scanned!"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Token captured. Switch to "Verify Token" to proceed.'})]})]})]}),E==="verify"&&e.jsxs(v,{className:"shadow-glow",children:[e.jsxs(T,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5"}),"Verify Booking QR Code"]}),e.jsx(W,{children:"Paste or use the scanned JWT token to verify the booking"})]}),e.jsxs($,{children:[e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"qr-token",children:"QR Token (JWT)"}),e.jsx(H,{id:"qr-token",type:"text",placeholder:"Paste JWT token here...",value:o,onChange:P=>d(P.target.value),className:"font-mono text-sm",disabled:j}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'The token should start with "eyJ..."'})]}),e.jsx(b,{type:"submit",className:"w-full",size:"lg",disabled:j||!o.trim(),children:j?"Verifying...":"Verify QR Code"})]}),p&&e.jsx("div",{className:`mt-6 p-4 rounded-lg ${p.includes("successfully")?"bg-primary/10 border border-primary text-primary":"bg-destructive/10 border border-destructive text-destructive"}`,children:e.jsx("p",{className:"font-medium",children:p})})]})]}),e.jsxs(v,{className:"mt-6",children:[e.jsx(T,{children:e.jsx(R,{children:"How to Use"})}),e.jsxs($,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("p",{children:'1. Click "Scan QR Code" and allow camera access'}),e.jsx("p",{children:"2. Point camera at student's QR code to scan automatically"}),e.jsx("p",{children:'3. Or switch to "Verify Token" and paste the JWT token manually'}),e.jsx("p",{children:'4. Click "Verify QR Code" to validate the booking'}),e.jsx("p",{children:"5. System will show seat number and duration on successful verification"})]})]})]})})},X=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:h("w-full caption-bottom text-sm",s),...t})}));X.displayName="Table";const Z=r.forwardRef(({className:s,...t},a)=>e.jsx("thead",{ref:a,className:h("[&_tr]:border-b",s),...t}));Z.displayName="TableHeader";const ee=r.forwardRef(({className:s,...t},a)=>e.jsx("tbody",{ref:a,className:h("[&_tr:last-child]:border-0",s),...t}));ee.displayName="TableBody";const _t=r.forwardRef(({className:s,...t},a)=>e.jsx("tfoot",{ref:a,className:h("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));_t.displayName="TableFooter";const U=r.forwardRef(({className:s,...t},a)=>e.jsx("tr",{ref:a,className:h("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",s),...t}));U.displayName="TableRow";const A=r.forwardRef(({className:s,...t},a)=>e.jsx("th",{ref:a,className:h("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));A.displayName="TableHead";const C=r.forwardRef(({className:s,...t},a)=>e.jsx("td",{ref:a,className:h("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));C.displayName="TableCell";const Mt=r.forwardRef(({className:s,...t},a)=>e.jsx("caption",{ref:a,className:h("mt-4 text-sm text-muted-foreground",s),...t}));Mt.displayName="TableCaption";const ae="/api",Vt=()=>{const{user:s,token:t,isAuthenticated:a}=F(),c=z(),[o,d]=r.useState(null),[j,u]=r.useState([]),[p,m]=r.useState(!1);r.useEffect(()=>{(!a||!(s!=null&&s.roles.includes("ROLE_ADMIN")))&&c("/")},[a,s,c]);const k=async()=>{m(!0);try{const i=await fetch(`${ae}/admin/allSubscription`,{headers:{Authorization:`Bearer ${t}`}});if(i.ok){const N=await i.json();u(N),d("subscriptions")}}catch{x.error("Failed to fetch subscriptions")}finally{m(!1)}},S=async()=>{m(!0);try{const i=await fetch(`${ae}/admin/allSeats`,{headers:{Authorization:`Bearer ${t}`}});if(i.ok){const N=await i.json();u(N),d("seats")}}catch{x.error("Failed to fetch seats")}finally{m(!1)}},E=async()=>{m(!0);try{const i=await fetch(`${ae}/admin/allBooking`,{headers:{Authorization:`Bearer ${t}`}});if(i.ok){const N=await i.json();u(N),d("bookings")}}catch{x.error("Failed to fetch bookings")}finally{m(!1)}},w=async()=>{m(!0);try{const i=await fetch(`${ae}/admin/allUsers`,{headers:{Authorization:`Bearer ${t}`}});if(i.ok){const N=await i.json();u(N),d("users")}}catch{x.error("Failed to fetch users")}finally{m(!1)}},D=()=>{if(p)return e.jsx("div",{className:"text-center py-8",children:"Loading..."});if(!o)return e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Select an option above to view data"});if(o==="subscriptions")return e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(U,{children:[e.jsx(A,{children:"ID"}),e.jsx(A,{children:"User"}),e.jsx(A,{children:"Type"}),e.jsx(A,{children:"Status"}),e.jsx(A,{children:"Amount"}),e.jsx(A,{children:"Period"})]})}),e.jsx(ee,{children:j.map(i=>{var N,l;return e.jsxs(U,{children:[e.jsx(C,{children:i.id}),e.jsx(C,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(N=i.user)==null?void 0:N.username}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(l=i.user)==null?void 0:l.email})]})}),e.jsx(C,{children:i.type}),e.jsx(C,{children:e.jsx(V,{variant:i.status==="ACTIVE"?"default":"secondary",children:i.status})}),e.jsxs(C,{children:["₹",i.price]}),e.jsxs(C,{className:"text-sm",children:[new Date(i.startDate).toLocaleDateString()," - ",new Date(i.endDate).toLocaleDateString()]})]},i.id)})})]});if(o==="seats")return e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(U,{children:[e.jsx(A,{children:"ID"}),e.jsx(A,{children:"Seat Number"}),e.jsx(A,{children:"Location"}),e.jsx(A,{children:"Status"})]})}),e.jsx(ee,{children:j.map(i=>{var N,l;return e.jsxs(U,{children:[e.jsx(C,{children:i.id}),e.jsx(C,{className:"font-medium",children:i.seatNumber}),e.jsx(C,{children:i.location}),e.jsx(C,{children:e.jsx(V,{variant:((N=i.status)==null?void 0:N.toLowerCase())==="available"?"default":((l=i.status)==null?void 0:l.toLowerCase())==="booked"?"destructive":"secondary",children:i.status})})]},i.id)})})]});if(o==="bookings")return e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(U,{children:[e.jsx(A,{children:"ID"}),e.jsx(A,{children:"User"}),e.jsx(A,{children:"Seat"}),e.jsx(A,{children:"Date & Time"}),e.jsx(A,{children:"Duration"}),e.jsx(A,{children:"Status"})]})}),e.jsx(ee,{children:j.map(i=>{var N,l,f;return e.jsxs(U,{children:[e.jsx(C,{children:i.id}),e.jsx(C,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(N=i.user)==null?void 0:N.username}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(l=i.user)==null?void 0:l.email})]})}),e.jsx(C,{className:"font-medium",children:(f=i.seat)==null?void 0:f.seatNumber}),e.jsxs(C,{className:"text-sm",children:[e.jsx("div",{children:new Date(i.bookingDate).toLocaleDateString()}),e.jsxs("div",{className:"text-muted-foreground",children:[i.startTime," - ",i.endTime]})]}),e.jsxs(C,{children:[i.hrs,"h"]}),e.jsx(C,{children:e.jsx(V,{variant:i.status==="CONFIRMED"?"default":"secondary",children:i.status})})]},i.id)})})]});if(o==="users")return e.jsxs(X,{children:[e.jsx(Z,{children:e.jsxs(U,{children:[e.jsx(A,{children:"ID"}),e.jsx(A,{children:"Username"}),e.jsx(A,{children:"Email"}),e.jsx(A,{children:"Roles"}),e.jsx(A,{children:"Created At"})]})}),e.jsx(ee,{children:j.map(i=>{var N;return e.jsxs(U,{children:[e.jsx(C,{children:i.id}),e.jsx(C,{className:"font-medium",children:i.username}),e.jsx(C,{children:i.email}),e.jsx(C,{children:e.jsx("div",{className:"flex gap-1",children:(N=i.roles)==null?void 0:N.map(l=>e.jsx(V,{variant:"outline",children:l.replace("ROLE_","")},l))})}),e.jsx(C,{className:"text-sm",children:new Date(i.createdAt).toLocaleDateString()})]},i.id)})})]})};return e.jsx("div",{className:"min-h-screen bg-background py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all library resources and users"})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[e.jsx(v,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:k,children:e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ie,{className:"h-5 w-5 text-primary"}),"All Subscriptions"]})})}),e.jsx(v,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:S,children:e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Je,{className:"h-5 w-5 text-primary"}),"All Seats"]})})}),e.jsx(v,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:E,children:e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Hs,{className:"h-5 w-5 text-primary"}),"All Bookings"]})})}),e.jsx(v,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:w,children:e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"flex items-center gap-2 text-lg",children:[e.jsx(_e,{className:"h-5 w-5 text-primary"}),"All Users"]})})})]}),e.jsxs(v,{children:[e.jsx(T,{children:e.jsxs(R,{children:[o==="subscriptions"&&"All Subscriptions",o==="seats"&&"All Seats",o==="bookings"&&"All Bookings",o==="users"&&"All Users",!o&&"Dashboard"]})}),e.jsx($,{children:D()})]})]})})},Qt=()=>{const s=Js();return r.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),e.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},Ht=new at,Jt=()=>e.jsx(Ws,{client:Ht,children:e.jsxs(pt,{children:[e.jsx(xt,{}),e.jsx(ht,{}),e.jsx(qs,{children:e.jsxs(gt,{children:[e.jsx(St,{}),e.jsxs(Ys,{children:[e.jsx(O,{path:"/",element:e.jsx(ve,{})}),e.jsx(O,{path:"/home",element:e.jsx(ve,{})}),e.jsx(O,{path:"/auth",element:e.jsx(Tt,{})}),e.jsx(O,{path:"/seat-booking",element:e.jsx(Rt,{})}),e.jsx(O,{path:"/subscriptions",element:e.jsx(Lt,{})}),e.jsx(O,{path:"/payment",element:e.jsx($t,{})}),e.jsx(O,{path:"/profile",element:e.jsx(zt,{})}),e.jsx(O,{path:"/librarian",element:e.jsx(Ft,{})}),e.jsx(O,{path:"/admin",element:e.jsx(Vt,{})}),e.jsx(O,{path:"*",element:e.jsx(Qt,{})})]})]})})]})});Gs(document.getElementById("root")).render(e.jsx(Jt,{}));
